import { Meta } from "@storybook/react";

# FetchNotionBlocks

This helper function is to be used only on the backend where your secret keys cannot be accessed by the client

It fetches all the blocks of a specific page and all the block's children. The results from this function can be fed into the `NotionBlocks` component

**Cannot be run on the frontend**

## API

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
	  <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>notionkey</td>
      <td>string</td>
      <td>Your notion secret key</td>
	  <td>`null`</td>
    </tr>
    <tr>
      <td>notionPageId</td>
      <td>string</td>
      <td>The id of the page you want to fetch</td>
	  <td>`null`</td>
    </tr>
    <tr>
      <td>fetchPageDetails</td>
      <td>boolean</td>
      <td>Whether to fetch the page details or not. Defaults to true</td>
	  <td>`true`</td>
    </tr>
  </tbody>
</table>

## Returns

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>cover</td>
      <td>string</td>
      <td>The cover image of the page</td>
    </tr>
    <tr>
      <td>response</td>
      <td>object</td>
      <td>
        The response from the notion API, this is an object that contains
        information about the requested page such as title, emoji etc.
      </td>
    </tr>
    <tr>
      <td>blocks</td>
      <td>object</td>
      <td>
        The blocks of the page, this is an object that contains all the blocks
        of the page and their children
      </td>
    </tr>
  </tbody>
</table>

## Usage

### Backend

```js
import { FetchNotionBlocks } from "notion-blocks";

const { cover, response, blocks } = await FetchNotionBlocks({
  notionkey: process.env.NOTION_KEY,
  notionPageId: PAGE_ID,
});
```

### Frontend

```js
import { NotionBlocks } from "notion-blocks";

const blocks = //Fetched blocks from backend

return (
  <NotionBlocks blocks={blocks}>
)

```
